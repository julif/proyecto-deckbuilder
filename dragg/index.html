<!doctype html>
<html>
<head>
  <!-- version: dragg 0.2 -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--  dragg -->
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
  <script src="jquery.ui.touch_punch.min.js.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <style>
    :root {
      --card-height: 150px;
      --card-width: calc(var(--card-height) / 1.4);
    }
    body{
      margin: 0px auto;
      font-family: "proxima-nova",sans-serif;
      background-color: #243140;
    }
    carta{
      display: block;
    width: var(--card-width);
    height: var(--card-height);
    background: #e2e2e7;
    margin-right: 10px;
    display: flex;
    justify-content: center;
    align-items: center;
    border: 3px solid black;
    cursor: pointer;
    }
    .drop_zone{
      background-color: #ad3d3d;
    height: 150px;
    width: 100px;
    border: 3px solid black;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-right: 10px;
    text-align: center;
      }
      mano {
    display: flex;
}
  </style>
</head>
<body>
  <h1>version dragg 0.1.2 </h1> 
  <p style="color: #8c9eb3;"> enemigos multiples </p>
  <div style="
  display: flex;
  padding: 10px;
">
<div class="drop_zone" target="vida_enemiga" variable="puntos_vida_enemigo">  <enemigo   id="vida_enemiga"></enemigo> </div>
<div class="drop_zone" target="vida_enemiga2" variable="puntos_vida_enemigo2">   <enemigo   id="vida_enemiga2"></enemigo>  </div>
</div>
<mano>
  <carta> carta </carta>
  <carta> carta </carta>
  <carta> carta </carta>
</mano>

</body>
<script type="text/javascript">
    var puntos_vida_enemigo = 1;
    document.getElementById("vida_enemiga").innerHTML = puntos_vida_enemigo;

    var puntos_vida_enemigo2 = 1;
    document.getElementById("vida_enemiga2").innerHTML = puntos_vida_enemigo2;

 /*    function reducir_vida_rival(e) {
      puntos_vida_enemigo = puntos_vida_enemigo - 1;
      document.getElementById("vida_enemiga").innerHTML = puntos_vida_enemigo;
      e.remove();

      console.log( this);
    } */

       //------------
       function reducir_vida_rival(a,b) {
      a = a - 1;
      document.getElementById(b).innerHTML = a; 
      event_target.remove();
    }

    // ---------------------------------------------------------------------------------------------------
    // ------------------------ dragg and drop para computadora ------------------------------------------
    // ---------------------------------------------------------------------------------------------------
    var event_target;
    //timer para click mobile
    var timer;
    var touchDuration = 115;
    var long_touch = false;

    $('carta').draggable({
      appendTo: "body",
      containment: "window",
      cursor: "move",
      helper: "clone",
      revert: true,
      revertDuration: 0
    });
    //click
    $('carta').click(function(){ alert("click"); });
    //dragg start
    $( "body" ).on( "dragstart",  function( event, ui ) {   event.target.style.opacity=0.2 ; event_target = event.target;  
      firstY = event.clientY;  
      firstX = event.clientX;  
      long_touch = false; timer = setTimeout(function () {long_touch = true;}, touchDuration);  });
    //dragg stop
    $( "body" ).on( ".carta dragstop", function( event, ui ) { event.target.style.opacity=1; ui.helper.remove(); if (timer) { clearTimeout(timer);} if(  long_touch == false ){ 
      currentY = event.clientY; 
      resultadoY = firstY-currentY; 
      currentX = event.clientX; 
      resultadoX = firstX-currentX; 
      /*  si el mouse se mueve mas de 5 pixeles */ 
      if ( resultadoY > -5 &&  resultadoY < 5 ) {  alert("click Y");  return} 
      if ( resultadoX > -5 &&  resultadoX < 5 ) {  alert("click X");  return} 
    
    } else if(  long_touch == true ){}
     });
    //drop
    $(".drop_zone").droppable({   drop: function(event, ui) { 
      
      // reducir_vida_rival(event_target); 
    
      reducir_vida_rival(   eval(event.target.attributes.variable.value) ,event.target.attributes.target.value);
    
    }   }); 








</script>
</html>